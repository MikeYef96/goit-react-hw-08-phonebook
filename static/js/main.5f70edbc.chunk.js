(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[2],{107:function(t,e,n){},138:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(30),o=n.n(a),i=n(23),s=n(15),u=n(84),l=(n(107),n(85)),b=n(7),j=n(162),f=n(2);function d(t){var e=t.children;return Object(f.jsxs)("div",{children:[e,Object(f.jsx)(j.a,{})]})}var h=n(32),p=n(43),O=n(16);function g(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,c=Object(p.a)(t,["children","redirectTo"]),a=Object(s.c)(O.c.getIsLoggedIn);return Object(f.jsx)(b.b,Object(h.a)(Object(h.a)({},c),{},{children:a?e:Object(f.jsx)(b.a,{to:r})}))}function x(t){var e=t.children,n=t.restricted,r=void 0!==n&&n,c=t.redirectTo,a=void 0===c?"/":c,o=Object(p.a)(t,["children","restricted","redirectTo"]),i=Object(s.c)(O.c.getIsLoggedIn)&&r;return Object(f.jsx)(b.b,Object(h.a)(Object(h.a)({},o),{},{children:i?Object(f.jsx)(b.a,{to:a}):e}))}var v=n(166),m=n(167),k=n(168),y={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:900,fontSize:18,color:"#6f7ff7"},activeLink:{color:"#ffffff",fontSize:"25px"}};function C(){return Object(f.jsxs)("nav",{children:[Object(f.jsx)(i.b,{to:"/",exact:!0,style:y.link,activeStyle:y.activeLink,children:"Home"}),Object(f.jsx)(i.b,{to:"/contacts",exact:!0,style:y.link,activeStyle:y.activeLink,children:"Contacts"})]})}var w={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:900,fontSize:18,color:"#6f7ff7"},activeLink:{color:"#ffffff",fontSize:"25px"}};function I(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(i.b,{to:"/register",exact:!0,style:w.link,activeStyle:w.activeLink,children:"Registration"}),Object(f.jsx)(i.b,{to:"/login",exact:!0,style:w.link,activeStyle:w.activeLink,children:"Login"})]})}var L=n(171),S=n(89),z=n.n(S),U={container:{display:"flex",alignItems:"baseline",color:"#6f7ff7"},name:{fontWeight:700,fontSize:18,marginRight:12},button:{color:"#6f7ff7",fontWeight:700,fontSize:18,textTransform:"capitalize"}};function F(){var t=Object(s.b)(),e=Object(s.c)(O.c.getUsername);return Object(f.jsxs)("div",{style:U.container,children:[Object(f.jsxs)("span",{style:U.name,children:["Welcome, ",e]}),Object(f.jsx)(L.a,{type:"button",style:U.button,endIcon:Object(f.jsx)(z.a,{fontSize:"small"}),onClick:function(){return t(O.a.logOut())},children:Object(f.jsx)("span",{children:"Sign out"})})]})}function W(){var t=Object(s.c)(O.c.getIsLoggedIn);return Object(f.jsx)(v.a,{position:"static",children:Object(f.jsx)(m.a,{children:Object(f.jsxs)(k.a,{container:!0,justify:"space-around",alignItems:"center",children:[Object(f.jsx)(k.a,{item:!0,children:Object(f.jsx)(C,{})}),t?Object(f.jsx)(k.a,{item:!0,children:Object(f.jsx)(F,{})}):Object(f.jsx)(k.a,{item:!0,children:Object(f.jsx)(I,{})})]})})})}var T=n(169),R=Object(T.a)((function(t){return{appBar:{top:"auto",bottom:0}}}));function V(){var t=R();return Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsx)(j.a,{}),Object(f.jsx)(v.a,{color:"primary",className:t.appBar,children:Object(f.jsx)(m.a,{})})]})}var E,B=n(92),P=n(170),q=n(93),A=n(61),D=n.n(A),J=Object(r.lazy)((function(){return Promise.all([n.e(5),n.e(10)]).then(n.bind(null,381))})),H=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,377))})),M=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,379))})),N=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(9),n.e(6)]).then(n.bind(null,382))})),G=Object(B.a)({palette:{primary:{main:"#011211"},secondary:{main:"#faa346"}}}),K=Object(q.a)(E||(E=Object(l.a)(["\n  display: block;\n  margin: 50px auto;\n  border-color: red;\n"])));function Q(){var t=Object(s.b)(),e=Object(s.c)(O.c.getIsFetchingCurrent);return console.log(e),Object(r.useEffect)((function(){t(O.a.fetchCurrentUser())}),[t]),Object(f.jsx)(d,{children:e?Object(f.jsx)(D.a,{css:K,color:"#e8834d",size:150}):Object(f.jsxs)(P.a,{theme:G,children:[Object(f.jsx)(W,{}),Object(f.jsx)(b.d,{children:Object(f.jsxs)(r.Suspense,{fallback:Object(f.jsx)(D.a,{css:K,color:"#e8834d",size:150}),children:[Object(f.jsx)(x,{exact:!0,path:"/",component:J}),Object(f.jsx)(x,{path:"/register",component:H,redirectTo:"/",restricted:!0}),Object(f.jsx)(x,{path:"/login",component:M,redirectTo:"/",restricted:!0}),Object(f.jsx)(g,{path:"/contacts",component:N,redirectTo:"/login"})]})}),Object(f.jsx)(V,{})]})})}var X=n(45),Y=n(4),Z=n(29),$=n(90),_=n.n($),tt=n(91),et=n.n(tt),nt=n(62),rt=[].concat(Object(X.a)(Object(Y.f)({serializableCheck:{ignoredActions:[Z.a,Z.f,Z.b,Z.c,Z.d,Z.e]}})),[_.a]),ct={key:"auth",storage:et.a,whitelist:["token"]},at=Object(Y.a)({reducer:{auth:Object(Z.g)(ct,O.b),contacts:nt.c},middleware:rt,devTools:!1}),ot=Object(Z.h)(at);o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(s.a,{store:at,children:Object(f.jsx)(u.a,{loading:null,persistor:ot,children:Object(f.jsx)(i.a,{children:Object(f.jsx)(Q,{})})})})}),document.getElementById("root"))},16:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o.a})),n.d(e,"c",(function(){return s.a}));var r,c=n(17),a=n(4),o=n(27),i=Object(a.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(r={},Object(c.a)(r,o.a.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(c.a)(r,o.a.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(c.a)(r,o.a.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(c.a)(r,o.a.fetchCurrentUser.pending,(function(t){t.isFetchingCurrentUser=!0})),Object(c.a)(r,o.a.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetchingCurrentUser=!1})),Object(c.a)(r,o.a.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrentUser=!1})),r)}).reducer,s=n(67)},27:function(t,e,n){"use strict";var r=n(12),c=n.n(r),a=n(28),o=n(21),i=n.n(o),s=n(4);i.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var u=function(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)},l=function(){i.a.defaults.headers.common.Authorization=""},b=Object(s.c)("auth/register",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("/users/signup",e);case 4:return a=t.sent,o=a.data,u(o.token),t.abrupt("return",o);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),j=Object(s.c)("auth/login",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("/users/login",e);case 4:return a=t.sent,o=a.data,u(o.token),t.abrupt("return",o);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),f={register:b,logOut:Object(s.c)("auth/logout",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("/users/logout");case 4:l(),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),logIn:j,fetchCurrentUser:Object(s.c)("auth/refresh",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue("need to log in"));case 4:return u(a),t.prev=5,t.next=8,i.a.get("/users/current");case 8:return o=t.sent,s=o.data,t.abrupt("return",s);case 13:t.prev=13,t.t0=t.catch(5),n.rejectWithValue(t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())};e.a=f},62:function(t,e,n){"use strict";n.d(e,"b",(function(){return v})),n.d(e,"c",(function(){return I})),n.d(e,"d",(function(){return U})),n.d(e,"a",(function(){return x}));var r,c=n(12),a=n.n(c),o=n(28),i=n(21),s=n.n(i),u=n(4),l=Object(u.b)("contacts/fetchContactsRequest"),b=Object(u.b)("contacts/fetchContactsSuccess"),j=Object(u.b)("contacts/fetchContactsError"),f=Object(u.b)("contacts/addContactRequest"),d=Object(u.b)("contacts/addContactSuccess"),h=Object(u.b)("contacts/addContactError"),p=Object(u.b)("contacts/deleteContactRequest"),O=Object(u.b)("contacts/deleteContactSuccess"),g=Object(u.b)("contacts/deleteContactError"),x=Object(u.b)("contacts/changeFilter"),v={fetchContacts:function(){return function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(l()),t.prev=1,t.next=4,s.a.get("/contacts");case 4:n=t.sent,r=n.data,e(b(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(j(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},addContact:function(t,e){return function(){var n=Object(o.a)(a.a.mark((function n(r){var c,o,i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={name:t,number:e},r(f()),n.prev=2,n.next=5,s.a.post("/contacts",c);case 5:o=n.sent,i=o.data,r(d(i)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),r(h(n.t0));case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(t){return n.apply(this,arguments)}}()},deleteContact:function(t){return function(){var e=Object(o.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(p()),e.prev=1,e.next=4,s.a.delete("/contacts/".concat(t));case 4:n(O(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n(g(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}},m=n(17),k=n(45),y=n(11),C=Object(u.d)([],(r={},Object(m.a)(r,b,(function(t,e){return e.payload})),Object(m.a)(r,d,(function(t,e){var n=e.payload;return[].concat(Object(k.a)(t),[n])})),Object(m.a)(r,O,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),w=Object(u.d)("",Object(m.a)({},x,(function(t,e){return e.payload}))),I=Object(y.c)({items:C,filter:w}),L=n(48),S=function(t){return t.contacts.items},z=function(t){return t.contacts.filter},U={getContacts:S,getFilter:z,getVisibleContacts:Object(L.a)([S,z],(function(t,e){return function(t){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))}(t)}))}},67:function(t,e,n){"use strict";var r={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name},getIsFetchingCurrent:function(t){return t.auth.isFetchingCurrentUser}};e.a=r}},[[138,3,4]]]);
//# sourceMappingURL=main.5f70edbc.chunk.js.map