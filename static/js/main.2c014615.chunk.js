(this["webpackJsonpphonebook-react-redux"]=this["webpackJsonpphonebook-react-redux"]||[]).push([[2],{105:function(e,t,n){},136:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(29),o=n.n(a),i=n(23),s=n(15),u=n(82),l=(n(105),n(83)),b=n(7),j=n(160),f=n(2);function d(e){var t=e.children;return Object(f.jsxs)("div",{children:[t,Object(f.jsx)(j.a,{})]})}var h=n(31),p=n(42),O=n(16);function g(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,c=Object(p.a)(e,["children","redirectTo"]),a=Object(s.c)(O.c.getIsLoggedIn);return Object(f.jsx)(b.b,Object(h.a)(Object(h.a)({},c),{},{children:a?t:Object(f.jsx)(b.a,{to:r})}))}function x(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo,a=void 0===c?"/":c,o=Object(p.a)(e,["children","restricted","redirectTo"]),i=Object(s.c)(O.c.getIsLoggedIn)&&r;return Object(f.jsx)(b.b,Object(h.a)(Object(h.a)({},o),{},{children:i?Object(f.jsx)(b.a,{to:a}):t}))}var v=n(164),m=n(165),k=n(166),y={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:900,fontSize:18,color:"#6f7ff7"},activeLink:{color:"#ffffff",fontSize:"25px"}};function C(){return Object(f.jsxs)("nav",{children:[Object(f.jsx)(i.b,{to:"/",exact:!0,style:y.link,activeStyle:y.activeLink,children:"Home"}),Object(f.jsx)(i.b,{to:"/contacts",exact:!0,style:y.link,activeStyle:y.activeLink,children:"Contacts"})]})}var I={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:900,fontSize:18,color:"#6f7ff7"},activeLink:{color:"#ffffff",fontSize:"25px"}};function w(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(i.b,{to:"/register",exact:!0,style:I.link,activeStyle:I.activeLink,children:"Registration"}),Object(f.jsx)(i.b,{to:"/login",exact:!0,style:I.link,activeStyle:I.activeLink,children:"Login"})]})}var L=n(169),S=n(87),z=n.n(S),U={container:{display:"flex",alignItems:"baseline",color:"#6f7ff7"},name:{fontWeight:700,fontSize:18,marginRight:12},button:{color:"#6f7ff7",fontWeight:700,fontSize:18,textTransform:"capitalize"}};function F(){var e=Object(s.b)(),t=Object(s.c)(O.c.getUsername);return Object(f.jsxs)("div",{style:U.container,children:[Object(f.jsxs)("span",{style:U.name,children:["Welcome, ",t]}),Object(f.jsx)(L.a,{type:"button",style:U.button,endIcon:Object(f.jsx)(z.a,{fontSize:"small"}),onClick:function(){return e(O.a.logOut())},children:Object(f.jsx)("span",{children:"Sign out"})})]})}function W(){var e=Object(s.c)(O.c.getIsLoggedIn);return Object(f.jsx)(v.a,{position:"static",children:Object(f.jsx)(m.a,{children:Object(f.jsxs)(k.a,{container:!0,justify:"space-around",alignItems:"center",children:[Object(f.jsx)(k.a,{item:!0,children:Object(f.jsx)(C,{})}),e?Object(f.jsx)(k.a,{item:!0,children:Object(f.jsx)(F,{})}):Object(f.jsx)(k.a,{item:!0,children:Object(f.jsx)(w,{})})]})})})}var T=n(167),R=Object(T.a)((function(e){return{appBar:{top:"auto",bottom:0}}}));function V(){var e=R();return Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsx)(j.a,{}),Object(f.jsx)(v.a,{color:"primary",className:e.appBar,children:Object(f.jsx)(m.a,{})})]})}var E,B=n(90),P=n(168),q=n(91),A=n(60),D=n.n(A),J=Object(r.lazy)((function(){return Promise.all([n.e(5),n.e(10)]).then(n.bind(null,379))})),H=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,374))})),M=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,376))})),N=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(9),n.e(6)]).then(n.bind(null,378))})),G=Object(B.a)({palette:{primary:{main:"#011211"},secondary:{main:"#faa346"}}}),K=Object(q.a)(E||(E=Object(l.a)(["\n  display: block;\n  margin: 50px auto;\n  border-color: red;\n"])));function Q(){var e=Object(s.b)(),t=Object(s.c)(O.c.getIsFetchingCurrent);return console.log(t),Object(r.useEffect)((function(){e(O.a.fetchCurrentUser())}),[e]),Object(f.jsx)(d,{children:t?Object(f.jsx)(D.a,{css:K,color:"#e8834d",size:150}):Object(f.jsxs)(P.a,{theme:G,children:[Object(f.jsx)(W,{}),Object(f.jsx)(b.d,{children:Object(f.jsxs)(r.Suspense,{fallback:Object(f.jsx)(D.a,{css:K,color:"#e8834d",size:150}),children:[Object(f.jsx)(x,{exact:!0,path:"/",component:J}),Object(f.jsx)(x,{path:"/register",component:H,redirectTo:"/",restricted:!0}),Object(f.jsx)(x,{path:"/login",component:M,redirectTo:"/",restricted:!0}),Object(f.jsx)(g,{path:"/contacts",component:N,redirectTo:"/login"})]})}),Object(f.jsx)(V,{})]})})}var X=n(44),Y=n(4),Z=n(28),$=n(88),_=n.n($),ee=n(89),te=n.n(ee),ne=n(61),re=[].concat(Object(X.a)(Object(Y.f)({serializableCheck:{ignoredActions:[Z.a,Z.f,Z.b,Z.c,Z.d,Z.e]}})),[_.a]),ce={key:"auth",storage:te.a,whitelist:["token"]},ae=Object(Y.a)({reducer:{auth:Object(Z.g)(ce,O.b),contacts:ne.c},middleware:re,devTools:!1}),oe=Object(Z.h)(ae);o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(s.a,{store:ae,children:Object(f.jsx)(u.a,{loading:null,persistor:oe,children:Object(f.jsx)(i.a,{children:Object(f.jsx)(Q,{})})})})}),document.getElementById("root"))},16:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return O}));var r=n(17),c=n(4),a=n(12),o=n.n(a),i=n(27),s=n(21),u=n.n(s);u.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var l,b=function(e){u.a.defaults.headers.common.Authorization="Bearer ".concat(e)},j=function(){u.a.defaults.headers.common.Authorization=""},f=Object(c.c)("auth/register",function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,u.a.post("/users/signup",t);case 4:return c=e.sent,a=c.data,b(a.token),e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),d=Object(c.c)("auth/login",function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,u.a.post("/users/login",t);case 4:return c=e.sent,a=c.data,b(a.token),e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),h={register:f,logOut:Object(c.c)("auth/logout",function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,u.a.post("/users/logout");case 4:j(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),logIn:d,fetchCurrentUser:Object(c.c)("auth/refresh",function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,c,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(c=r.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue("need to log in"));case 4:return b(c),e.prev=5,e.next=8,u.a.get("/users/current");case 8:return a=e.sent,i=a.data,e.abrupt("return",i);case 13:e.prev=13,e.t0=e.catch(5),n.rejectWithValue(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},p=Object(c.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(l={},Object(r.a)(l,h.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(r.a)(l,h.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(r.a)(l,h.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(r.a)(l,h.fetchCurrentUser.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(r.a)(l,h.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),Object(r.a)(l,h.fetchCurrentUser.rejected,(function(e){e.isFetchingCurrentUser=!1})),l)}).reducer,O={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUsername:function(e){return e.auth.user.name},getIsFetchingCurrent:function(e){return e.auth.isFetchingCurrentUser}}},61:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return U})),n.d(t,"a",(function(){return x}));var r,c=n(12),a=n.n(c),o=n(27),i=n(21),s=n.n(i),u=n(4),l=Object(u.b)("contacts/fetchContactsRequest"),b=Object(u.b)("contacts/fetchContactsSuccess"),j=Object(u.b)("contacts/fetchContactsError"),f=Object(u.b)("contacts/addContactRequest"),d=Object(u.b)("contacts/addContactSuccess"),h=Object(u.b)("contacts/addContactError"),p=Object(u.b)("contacts/deleteContactRequest"),O=Object(u.b)("contacts/deleteContactSuccess"),g=Object(u.b)("contacts/deleteContactError"),x=Object(u.b)("contacts/changeFilter"),v={fetchContacts:function(){return function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(l()),e.prev=1,e.next=4,s.a.get("/contacts");case 4:n=e.sent,r=n.data,t(b(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(j(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},addContact:function(e,t){return function(){var n=Object(o.a)(a.a.mark((function n(r){var c,o,i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={name:e,number:t},r(f()),n.prev=2,n.next=5,s.a.post("/contacts",c);case 5:o=n.sent,i=o.data,r(d(i)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),r(h(n.t0));case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}()},deleteContact:function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(p()),t.prev=1,t.next=4,s.a.delete("/contacts/".concat(e));case 4:n(O(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n(g(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}},m=n(17),k=n(44),y=n(11),C=Object(u.d)([],(r={},Object(m.a)(r,b,(function(e,t){return t.payload})),Object(m.a)(r,d,(function(e,t){var n=t.payload;return[].concat(Object(k.a)(e),[n])})),Object(m.a)(r,O,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),r)),I=Object(u.d)("",Object(m.a)({},x,(function(e,t){return t.payload}))),w=Object(y.c)({items:C,filter:I}),L=n(47),S=function(e){return e.contacts.items},z=function(e){return e.contacts.filter},U={getContacts:S,getFilter:z,getVisibleContacts:Object(L.a)([S,z],(function(e,t){return function(e){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))}(e)}))}}},[[136,3,4]]]);
//# sourceMappingURL=main.2c014615.chunk.js.map